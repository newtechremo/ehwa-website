# 프론트엔드 구조 분석 문서

> 이대목동병원 장애인 이용편의 지원센터 웹사이트
> 작성일: 2025년 12월 23일

---

## 목차

1. [프로젝트 개요](#1-프로젝트-개요)
2. [기술 스택](#2-기술-스택)
3. [디렉토리 구조](#3-디렉토리-구조)
4. [라우트 구성](#4-라우트-구성)
5. [페이지별 상세 기능](#5-페이지별-상세-기능)
6. [컴포넌트 구조](#6-컴포넌트-구조)
7. [상태 관리 및 데이터 흐름](#7-상태-관리-및-데이터-흐름)
8. [스타일링 시스템](#8-스타일링-시스템)
9. [접근성 기능](#9-접근성-기능)
10. [외부 연동 서비스](#10-외부-연동-서비스)
11. [빌드 및 배포](#11-빌드-및-배포)

---

## 1. 프로젝트 개요

### 1.1 프로젝트 목적

이대목동병원 장애인 이용편의 지원센터의 공식 웹사이트로, 장애인 환자들에게 병원 이용 편의 서비스를 안내하고 신청을 받는 플랫폼입니다.

### 1.2 주요 기능

| 기능 영역 | 설명 |
|----------|------|
| **메인 랜딩페이지** | 서비스 소개, 이용 방법, FAQ, 연락처 |
| **사업 소식** | 공지사항, 행사, 뉴스 게시판 |
| **관리자 CMS** | 게시글 작성/수정/삭제, 주요 소식 설정 |
| **접근성 도구** | 고대비 모드, 수어 영상, 글자 크기 조절 |

### 1.3 프레임워크 정보

- **프레임워크**: Next.js 16.0.7 (App Router)
- **런타임**: React 19.2.0
- **언어**: TypeScript 5
- **개발 포트**: 3112

---

## 2. 기술 스택

### 2.1 핵심 기술

| 분류 | 기술 | 버전 | 용도 |
|-----|------|------|------|
| **프레임워크** | Next.js | 16.0.7 | React 기반 풀스택 프레임워크 |
| **UI 라이브러리** | React | 19.2.0 | 컴포넌트 기반 UI |
| **타입 시스템** | TypeScript | 5.x | 정적 타입 검사 |
| **스타일링** | Tailwind CSS | 4.1.9 | 유틸리티 기반 CSS |
| **컴포넌트** | shadcn/ui | - | Radix UI 기반 컴포넌트 |

### 2.2 주요 라이브러리

| 라이브러리 | 용도 |
|-----------|------|
| `@radix-ui/*` | 접근성 준수 UI 프리미티브 (25개 이상) |
| `@tiptap/*` | 리치 텍스트 에디터 |
| `react-hook-form` + `zod` | 폼 상태 관리 및 유효성 검사 |
| `lucide-react` | 아이콘 라이브러리 |
| `date-fns` | 날짜 포맷팅 |
| `embla-carousel-react` | 캐러셀/슬라이더 |
| `recharts` | 차트 라이브러리 |
| `sonner` | 토스트 알림 |
| `next-themes` | 다크/라이트 모드 |
| `@vercel/analytics` | 웹 분석 |

---

## 3. 디렉토리 구조

```
ehwa_website/
├── app/                          # Next.js App Router
│   ├── layout.tsx               # 루트 레이아웃
│   ├── page.tsx                 # 메인 페이지
│   ├── globals.css              # 글로벌 스타일
│   └── admin/                   # 관리자 영역
│       ├── layout.tsx           # 관리자 레이아웃
│       ├── page.tsx             # 관리자 대시보드
│       ├── login/               # 로그인
│       ├── posts/               # 게시글 관리
│       │   ├── page.tsx         # 목록
│       │   ├── write/           # 작성
│       │   └── [id]/            # 수정
│       └── featured/            # 주요 소식 설정
│
├── components/                   # React 컴포넌트
│   ├── ui/                      # shadcn/ui 컴포넌트 (50개+)
│   ├── main/                    # 메인 페이지 섹션
│   └── theme-provider.tsx       # 테마 프로바이더
│
├── hooks/                        # 커스텀 훅
│   ├── useAccessibility.ts      # 접근성 상태 관리
│   ├── use-mobile.ts            # 모바일 감지
│   └── use-toast.ts             # 토스트 알림
│
├── lib/                          # 유틸리티
│   ├── utils.ts                 # cn() 클래스 병합
│   ├── posts.ts                 # 게시글 데이터 관리
│   └── api.ts                   # API 래퍼 함수
│
├── styles/                       # CSS 파일
│   └── main.css                 # 메인 페이지 스타일
│
├── public/                       # 정적 파일
│   └── images/                  # 이미지 에셋
│
└── docs/                         # 문서
```

---

## 4. 라우트 구성

### 4.1 공개 페이지

| 라우트 | 파일 | 설명 |
|-------|------|------|
| `/` | `app/page.tsx` | 메인 랜딩페이지 (SPA 형태) |

### 4.2 관리자 페이지

| 라우트 | 파일 | 설명 |
|-------|------|------|
| `/admin` | `app/admin/page.tsx` | 관리자 대시보드 (리다이렉트) |
| `/admin/login` | `app/admin/login/page.tsx` | 로그인 페이지 |
| `/admin/posts` | `app/admin/posts/page.tsx` | 게시글 목록 |
| `/admin/posts/write` | `app/admin/posts/write/page.tsx` | 게시글 작성 |
| `/admin/posts/[id]` | `app/admin/posts/[id]/page.tsx` | 게시글 수정 |
| `/admin/featured` | `app/admin/featured/page.tsx` | 주요 소식 설정 |

### 4.3 레이아웃 계층

```
app/layout.tsx (루트)
├── 메타데이터 (SEO, Open Graph)
├── 폰트 (Pretendard, Geist)
├── Vercel Analytics
└── Botpress 챗봇 스크립트

app/admin/layout.tsx (관리자)
├── 인증 체크
├── 사이드바 네비게이션
└── 로그아웃 기능
```

---

## 5. 페이지별 상세 기능

### 5.1 메인 페이지 (`/`)

**파일**: `app/page.tsx`

**구성 섹션**:

| 섹션 | 컴포넌트 | 기능 |
|-----|---------|------|
| 접근성 도구바 | `A11yBar` | 고대비, 수어, 글자 크기 조절 |
| 헤더 | `Header` | 네비게이션, 모바일 메뉴 |
| 히어로 | `HeroSection` | 이미지 슬라이더, CTA 버튼 |
| 이용 방법 | `StepsSection` | 4단계 안내, 수어 영상 |
| FAQ | `FaqSection` | 아코디언 형태 5개 질문 |
| 신청하기 | `ContactSection` | 연락처, 신청 버튼, 수어 영상 |
| 사업 소식 | `BlogSection` | 게시글 목록, 상세 모달 |
| 푸터 | `Footer` | 저작권, 연락처 |

**상태 관리**:
```typescript
// 페이지 전환 상태
const [currentPage, setCurrentPage] = useState<"main" | "blog">("main")
const [currentSection, setCurrentSection] = useState<SectionType>("hero")

// 접근성 상태 (useAccessibility 훅)
const { lowVision, signLanguage, fontScale } = useAccessibility()
```

**주요 기능**:
- SPA 형태로 메인/블로그 뷰 전환
- 스크롤 위치 기반 현재 섹션 추적
- 섹션별 스무스 스크롤 이동

---

### 5.2 관리자 로그인 (`/admin/login`)

**파일**: `app/admin/login/page.tsx`

**기능**:
- 아이디/비밀번호 입력 폼
- localStorage 기반 인증 상태 저장
- 로그인 성공 시 `/admin/posts`로 리다이렉트

**인증 정보** (개발용):
```typescript
const ADMIN_ID = "admin"
const ADMIN_PW = "admin123"
```

---

### 5.3 게시글 목록 (`/admin/posts`)

**파일**: `app/admin/posts/page.tsx`

**기능**:

| 기능 | 설명 |
|-----|------|
| 게시글 테이블 | 번호, 제목, 카테고리, 상태, 작성일, 조회수 |
| 필터링 | 카테고리별, 상태별 필터 |
| 검색 | 제목 검색 |
| 상태 토글 | 공개/비공개 스위치 |
| 삭제 | 확인 다이얼로그 후 삭제 |
| 페이지네이션 | (데이터 증가 시 적용 가능) |

**데이터 로드**:
```typescript
useEffect(() => {
  const loadedPosts = getPosts()
  setPosts(loadedPosts)
}, [])
```

---

### 5.4 게시글 작성/수정 (`/admin/posts/write`, `/admin/posts/[id]`)

**파일**: `app/admin/posts/write/page.tsx`, `app/admin/posts/[id]/page.tsx`

**에디터 기능**:

| 기능 | 라이브러리 |
|-----|-----------|
| 리치 텍스트 편집 | TipTap |
| 볼드/이탤릭/밑줄 | StarterKit |
| 이미지 삽입 | @tiptap/extension-image |
| 플레이스홀더 | @tiptap/extension-placeholder |

**폼 필드**:

| 필드 | 타입 | 필수 |
|-----|------|------|
| 제목 | text | O |
| 카테고리 | select (공지/행사/뉴스) | O |
| 상태 | switch (공개/비공개) | O |
| 썸네일 이미지 | file (Base64) | X |
| 첨부파일 | file (Base64, 20MB 제한) | X |
| 본문 | TipTap 에디터 | O |

---

### 5.5 주요 소식 설정 (`/admin/featured`)

**파일**: `app/admin/featured/page.tsx`

**기능**:
- 3개의 슬롯에 게시글 배치
- 공개 상태 게시글만 선택 가능
- 중복 선택 방지 유효성 검사
- 즉시 메인 페이지에 반영

**데이터 구조**:
```typescript
type FeaturedSlots = {
  slot1Id: number | null
  slot2Id: number | null
  slot3Id: number | null
}
```

---

## 6. 컴포넌트 구조

### 6.1 메인 페이지 컴포넌트 (`components/main/`)

| 컴포넌트 | Props | 주요 기능 |
|---------|-------|----------|
| **Header** | `currentPage`, `currentSection`, `onNavigateMain`, `onNavigateBlog` | 네비게이션, 모바일 드로어 메뉴, 사전문진표 다운로드 |
| **A11yBar** | `lowVision`, `signLanguage`, `fontScale`, 토글 핸들러들 | 접근성 도구 (고대비, 수어, 글자 크기) |
| **HeroSection** | - | 자동 슬라이드 (5초), 수동 네비게이션, 서비스 신청 CTA |
| **StepsSection** | `signLanguageEnabled` | 4단계 이용 방법, YouTube 수어 영상 |
| **FaqSection** | `signLanguageEnabled` | 아코디언 FAQ 5개, 수어 영상 |
| **ContactSection** | `signLanguageEnabled` | 연락처, 신청 버튼, 카카오톡 링크, 수어 영상 |
| **BlogSection** | - | 주요 소식 카드, 전체 게시글 테이블/리스트 |
| **PostModal** | `post`, `isOpen`, `onClose` | 게시글 상세 보기, 첨부파일 다운로드 |
| **Footer** | - | 저작권, 연락처, 개인정보처리방침 |

### 6.2 UI 컴포넌트 (`components/ui/`)

shadcn/ui 기반 50개 이상의 재사용 가능한 컴포넌트:

**폼 관련**: button, input, textarea, label, select, checkbox, radio-group, switch, form

**레이아웃**: card, sheet, dialog, drawer, sidebar, tabs, accordion

**데이터 표시**: table, badge, avatar, progress, skeleton

**피드백**: toast (sonner), alert-dialog, tooltip, popover

---

## 7. 상태 관리 및 데이터 흐름

### 7.1 상태 관리 방식

| 방식 | 용도 | 예시 |
|-----|------|------|
| **useState** | 컴포넌트 로컬 상태 | 모달 열림/닫힘, 폼 입력 |
| **useEffect** | 사이드 이펙트 | 데이터 로드, 이벤트 리스너 |
| **localStorage** | 영구 저장 | 게시글, 인증 상태 |
| **URL 파라미터** | 라우팅 상태 | 게시글 ID |

### 7.2 데이터 모델

**Post 타입**:
```typescript
type Post = {
  id: number                          // 타임스탬프 기반
  title: string
  content: string                     // HTML
  thumbnailImage?: string             // Base64
  category: "공지" | "행사" | "뉴스"
  status: boolean                     // 공개 여부
  viewCount: number
  publishedAt: string                 // ISO 8601
  createdAt: string
  updatedAt: string
  attachment?: {
    name: string
    data: string                      // Base64
    size: number
  } | null
}
```

### 7.3 데이터 함수 (`lib/posts.ts`)

| 함수 | 반환 | 설명 |
|-----|------|------|
| `getPosts()` | `Post[]` | 모든 게시글 조회 |
| `getActivePosts()` | `Post[]` | 공개 게시글만 조회 |
| `getPostById(id)` | `Post \| null` | ID로 단일 조회 |
| `getFeaturedSlots()` | `FeaturedSlots` | 주요 소식 설정 조회 |
| `getFeaturedPosts()` | `Post[]` | 주요 소식 게시글 조회 |
| `getCategoryColor(category)` | `string` | 카테고리 색상 |
| `formatDate(dateString)` | `string` | 날짜 포맷 (YYYY.MM.DD) |

### 7.4 탭 간 동기화

```typescript
// BlogSection에서 storage 이벤트 감지
useEffect(() => {
  const loadPosts = () => {
    const activePosts = getActivePosts()
    setPosts(activePosts)
  }

  window.addEventListener("storage", loadPosts)
  return () => window.removeEventListener("storage", loadPosts)
}, [])
```

---

## 8. 스타일링 시스템

### 8.1 CSS 구조

| 파일 | 용도 |
|-----|------|
| `app/globals.css` | Tailwind 임포트, CSS 변수 (OKLCH 색상) |
| `styles/main.css` | 메인 페이지 커스텀 스타일 (460줄) |

### 8.2 주요 색상

| 용도 | 색상 | 코드 |
|-----|------|------|
| 프라이머리 (병원 브랜드) | 진한 녹색 | `#004c28` |
| 카카오톡 | 노랑 | `#FEE500` |
| 링크/강조 | 파랑 | `#0056b3` |
| 텍스트 (진한) | 검정 | `#333` |
| 텍스트 (중간) | 회색 | `#666` |
| 보더 | 연한 회색 | `#eee` |

### 8.3 반응형 브레이크포인트

| 브레이크포인트 | 크기 | 용도 |
|--------------|------|------|
| `sm` | 640px | 소형 모바일 |
| `md` | 768px | 태블릿 |
| `lg` | 1024px | 데스크탑 |
| `xl` | 1280px | 대형 화면 |

### 8.4 커스텀 CSS 클래스

```css
/* 수어 영상 컨테이너 애니메이션 */
.sign-container { max-height: 0; opacity: 0; transition: all 0.5s; }
.sign-container.visible { max-height: 600px; opacity: 1; }

/* 모바일 메뉴 드로어 */
.mobile-menu-wrap { right: -100%; transition: right 0.3s; }
.mobile-menu-wrap.open { right: 0; }

/* 카드 호버 효과 */
.card-hover:hover { transform: translateY(-8px); }

/* 고대비 모드 */
body.low-vision { background: #000; color: #fff; zoom: 1.2; }
```

---

## 9. 접근성 기능

### 9.1 접근성 도구바 (A11yBar)

| 기능 | 설명 | 구현 |
|-----|------|------|
| **고대비 모드** | 검정 배경, 흰색/노랑 텍스트 | `body.low-vision` 클래스 |
| **수어 영상** | YouTube 수어 해설 영상 표시 | `signLanguageEnabled` prop |
| **글자 크기** | 100%, 125%, 150% 조절 | `html { font-size: X% }` |

### 9.2 고대비 모드 스타일

```css
body.low-vision {
  background-color: #000 !important;
  color: #fff !important;
  zoom: 1.2;
}

body.low-vision h1, body.low-vision h2, body.low-vision a {
  color: #f7ed72 !important;  /* 노랑 강조 */
}

body.low-vision * {
  border-color: #00ffff !important;  /* 청록 테두리 */
}
```

### 9.3 키보드 접근성

| 기능 | 구현 |
|-----|------|
| 포커스 표시 | `focus-visible: outline 3px solid #ffd700` |
| 모달 닫기 | ESC 키 지원 |
| ARIA 속성 | `aria-label`, `aria-pressed`, `aria-expanded` |
| 시맨틱 HTML | `<main>`, `<nav>`, `<section>`, `<footer>` |

### 9.4 스크린 리더 지원

```html
<!-- 숨김 텍스트 -->
<span class="sr-only">사업소식 전체 목록</span>

<!-- ARIA 레이블 -->
<button aria-label="메뉴 열기">
<button aria-pressed="true">고대비</button>
```

---

## 10. 외부 연동 서비스

### 10.1 Botpress 챗봇

**통합 방식**: Script 태그 삽입

```tsx
<Script
  src="https://cdn.botpress.cloud/webchat/v3.5/inject.js"
  strategy="beforeInteractive"
/>
<Script
  src="https://files.bpcontent.cloud/2025/12/10/03/20251210031337-4FY67QL3.js"
  strategy="beforeInteractive"
/>
```

**특징**:
- `beforeInteractive` 전략으로 페이지 로드 전 실행
- 우측 하단 플로팅 버튼
- 고대비 모드에서 청록색 테두리 적용

### 10.2 Vercel Analytics

```tsx
import { Analytics } from "@vercel/analytics/next"
<Analytics />
```

### 10.3 외부 링크

| 서비스 | URL | 용도 |
|-------|-----|------|
| 서비스 신청 폼 | walla.my/survey/... | Google 설문 |
| 카카오톡 상담 | pf.kakao.com/... | 채널 채팅 |
| 사전문진표 | drive.google.com/... | PDF 다운로드 |
| 수어 영상 | youtube.com/embed/... | 임베드 영상 |

### 10.4 폰트 CDN

| 폰트 | 소스 |
|-----|------|
| Pretendard | jsDelivr CDN |
| FontAwesome 6.4 | cdnjs CDN |
| Geist | Next.js Google Fonts |

---

## 11. 빌드 및 배포

### 11.1 스크립트

```bash
npm run dev      # 개발 서버 (포트 3112)
npm run build    # 프로덕션 빌드
npm run start    # 프로덕션 서버 (포트 3112)
npm run lint     # ESLint 검사
```

### 11.2 환경 설정

**`.env.local`**:
```env
PORT=3112
HOSTNAME=0.0.0.0
NODE_ENV=development
# NEXT_PUBLIC_API_URL=http://your-domain.com:3112
```

### 11.3 Next.js 설정 (`next.config.mjs`)

```javascript
const nextConfig = {
  typescript: {
    ignoreBuildErrors: true,  // 빌드 시 TS 에러 무시
  },
  images: {
    unoptimized: true,  // 이미지 최적화 비활성화
  },
  // CORS 헤더 설정
  async headers() {
    return [{
      source: '/:path*',
      headers: [
        { key: 'Access-Control-Allow-Origin', value: '*' },
        { key: 'Access-Control-Allow-Methods', value: 'GET, POST, PUT, DELETE, OPTIONS' },
      ],
    }]
  },
}
```

### 11.4 검색 엔진 설정

```html
<!-- 검색엔진 비노출 -->
<meta name="robots" content="noindex, nofollow" />
<meta name="googlebot" content="noindex, nofollow" />
```

---

## 부록: 데이터 흐름 다이어그램

### 메인 페이지 데이터 흐름

```
┌─────────────────────────────────────────────────────────────┐
│                      app/page.tsx                           │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  useAccessibility()                                  │   │
│  │  - lowVision, signLanguage, fontScale               │   │
│  └─────────────────────────────────────────────────────┘   │
│                           │                                 │
│    ┌──────────────────────┼──────────────────────┐         │
│    ▼                      ▼                      ▼         │
│ ┌──────┐  ┌────────────────────┐  ┌────────────────────┐   │
│ │A11yBar│  │   Main Sections    │  │   BlogSection     │   │
│ │      │  │ (Hero, Steps, FAQ, │  │                    │   │
│ │      │  │  Contact)          │  │ localStorage ──────┼───┼─► news_posts
│ └──────┘  └────────────────────┘  │                    │   │
│                                   │ ┌────────────────┐ │   │
│                                   │ │  PostModal     │ │   │
│                                   │ └────────────────┘ │   │
│                                   └────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

### 관리자 페이지 데이터 흐름

```
┌─────────────────────────────────────────────────────────────┐
│                    Admin Pages                              │
│                                                             │
│  ┌──────────┐    ┌──────────────────────────────────────┐  │
│  │  Login   │───►│  localStorage.isAuthenticated        │  │
│  └──────────┘    └──────────────────────────────────────┘  │
│                                    │                        │
│                                    ▼                        │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              Admin Layout (인증 체크)                │   │
│  └─────────────────────────────────────────────────────┘   │
│           │                    │                    │       │
│           ▼                    ▼                    ▼       │
│  ┌──────────────┐  ┌──────────────────┐  ┌──────────────┐  │
│  │  Posts List  │  │  Write/Edit Post │  │   Featured   │  │
│  │              │  │                  │  │              │  │
│  │ localStorage │◄─┤  TipTap Editor   │  │ localStorage │  │
│  │ (news_posts) │  │  File Upload     │  │(featured_slots)│ │
│  └──────────────┘  └──────────────────┘  └──────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

---

## 문서 정보

| 항목 | 내용 |
|-----|------|
| 문서 버전 | 1.0 |
| 작성일 | 2025년 12월 23일 |
| 대상 프로젝트 | 이대목동병원 장애인 이용편의 지원센터 웹사이트 |
| Next.js 버전 | 16.0.7 |
| React 버전 | 19.2.0 |
